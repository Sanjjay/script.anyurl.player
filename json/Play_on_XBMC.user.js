// ==UserScript==
// @name        Play on Kodi/XBMC
// @namespace   user@violet.local
//
// @description Resolve and play media on Kodi/XBMC
// @description Use with AnyURL plugin from:
// @description  https://github.com/VioletRed/script.anyurl.player/wiki
//
// @date        2015-01-09
// @version     21
// @include     *
// @require     https://raw.github.com/sizzlemctwizzle/GM_config/master/gm_config.js
// @grant       GM_addStyle
// @grant       GM_getValue
// @grant       GM_setValue
// @grant       GM_xmlhttpRequest
// @updateURL   https://github.com/VioletRed/script.anyurl.player/raw/master/json/Play_on_XBMC.user.js
// ==/UserScript==
//
// Simple script to send media to Kodi.
// Adds a "Send to Kodi" button on supported websites
// Supported plugins:
// 	* Youtube
//	* TED
// 	* AnyURL plugin for other domains (https://github.com/VioletRed/script.anyurl.player).
//
// It uses the old GM_*** API, and needs cleaning.

/* ============================================================================
 * Global config
 * */
GM_config.init({
	'id' : 'GM_config', // The id used for this instance of GM_config
	'title' : 'Kodi setup',
	'fields' : // Fields object
	{
		'XBMC_ADDRESS' : // This is the id of the field
		{
			'label' : 'Host', // Appears next to field
			'type' : 'text', // Makes this setting a text field
			'default' : '<host>:<port>' // Default value if user doesn't
		// change it
		},
		'USE_BIG' : {
			'label' : 'Use big buttons', // Appears next to field
			'type' : 'checkbox', // Makes this setting a checkbox input
			'default' : false
		// Default value if user doesn't change it
		}
	},
	'css' : 'background:#103040;'
});

var xbmc_address = GM_config.get('XBMC_ADDRESS');
var xbmc_queued = null;
const
xbmc_music_playlist = 0; // Queue for party mode
const
xbmc_video_playlist = 1; // Queue for video mode
const
xbmc_partylist_size = -10
const
is_playlist = 1;
// Remove known top domain names (i.e 'www', 'm', 'embed')
var top_domain = /^www\.|^m\.|^embed\./
var current_host = window.location.host.toLowerCase().replace(top_domain, '');

/*
 * ============================================================================
 * Global UI elements
 * ============================================================================
 */
var xbmc_ui = null;
var xbmc_title = null;
var xbmc_play_control = null;
var xbmc_msg_timer = null;

/* Long, boring transcription of PNG graphics in Base64 encoding, ignore them */

const
More_20H_png = "iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDDEA6kUjDgAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAGaSURBVDjLzZQ7SwNB"
		+ "FIXvnVmTXRGDaAqJhYWPQlxTBiy1ir/BSsQmLD5CxEZ8FBIQwSg+CgtB8gvsBCsb"
		+ "2wQflbBq8B1cUWeTdefaWKziA9mAnu7AmY8zd5iL0Wg0+OI4M4zzlKZVP0vpuvAL"
		+ "IWNcCMHIfRnhSmBTccrloea2jtTE+Oh8uCEskOQ7IOdcer3ruszrJSA3T89q5xaW"
		+ "V2/NY6YgY8bQ4MBidyx2+VmDTCbTqKqqCwBg2zY3DOPiY6a9tcV6ur9bmZyaHlWI"
		+ "yEXpfHmldDo95vWGYSQ/ywVUzQEAwRCxDBUQEQEAAIMKS/kxoCiPmqZZAABCiJBv"
		+ "oGmaUxVtGIlE5r2+UCgkv8tXfIb/H/jjDLPZ7GQwGJQAAKVSifkGJhKJflVVH9++"
		+ "Xk0+n1/3BSwWi61//igIiOgX9IZARkTXhYuber/Ao5PzTiK6Ql3Xe4Vt7wxPzG53"
		+ "tTUdkpTk2SAYCoWevQcty6pGRPI2293b79zaWIurmtaDAAC6rvdJKZeqAoE6IJK/"
		+ "XFvMcZwHznk8l8sdvAL8H6BwdbBvlQAAAABJRU5ErkJggg==";
const
More_20_png = "iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDDEQ9/IzagAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAGsSURBVDjLzZQxSBtR"
		+ "HMa////eXdLBKrRD8boV1MUjWy2WIEUyVXARLKggqNEsOpQucXPplqVQAqWDg4NL"
		+ "luAohRYU3DJILS0O8SSioCaS5u7dvecixYhW5QLtt/0fHz++7/94jxKJhBVI+c4Q"
		+ "Ysm0rKoKwxD3ELFhSOkbKpBzhrBWhfT98Wc9vUtj46OT9pPOmg5lE9CyrKbZ932j"
		+ "icjC2Pn569HKamH5YHebBTEvpFKDsyPDw7vXJUin032xWCwAAM/zRD6f37zq6X/x"
		+ "/Kh2VJn/9Pn7WwEgpMDTN1UqFovvrxwNXOez4g88AL8ZgA8iRJXWWgMAo8UStxmY"
		+ "+cw0zVMAkFK2RwaWy+XXLU1o2/aXy7PrugN/bdTqHf7/wFt3mM1mJ+LxeAAAjUZD"
		+ "RAbmcrlFIUQNAIIgaMtkMjORgPV6veufXwqBKDqYiAAQA6hUDk/sqLy9w2pSa71P"
		+ "juO8lFJ+fTO18LH7aceGUurPV6aUItu2q0opunjX2nXdh8ysLwf7tlVKrq8VpoVp"
		+ "9hMAOI7zSmv9wRDisVZKAdB3LQqAwzA8ZuahUqn04xzOhJ1azlwC+QAAAABJRU5E"
		+ "rkJggg==";
const
More_30H_png = "iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDDAswYZ+rAAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAIkSURBVEjH7Zc/aFNB"
		+ "HMe/v9+7vjyi2EEHpTpIfDgoFwdBrEJx6xBQh2RyzGAG0aWDNoORgpQutQriorgI"
		+ "DgEHQaQW7FRdCjnBJYmKFhSLFTV95t+7c2gDMaTalLwWMV+44e57Pz7v3t3vjh9h"
		+ "VVLKMQCXfL++jYjRVRkNtsQCgAtKqUcAQKvQPIAD9XrNnD13vuwtvptteN3AVrYP"
		+ "DM1m7zqWEASgoJRySUqZAPBw8NRw+ebkeEYANQSgz0vfwxcvX7vy+sW0A+A0SSnn"
		+ "iPnYk+nnV3fv3OERkVkrWGtNuVwuxMymdTwajVZax5vlG0NvCoX+eDwxaox+KQD4"
		+ "BPh7dvUv/+2rq9UqYrHYWDuvWCyOOI6zZqxFZFzXLTGT9n3UGEAfNk91Y4wBAAZQ"
		+ "wRaIsUX6N8Ba6w157SQ6mWzbNlKp1JRlWb+niu/Dtu3gwEIIk06n33fjV3cE9jyP"
		+ "XNedaOfl8/mRcDhsAtljZt6Q10un/xPcaR6bTCYz3nqQtNawbdsEBmZmJJPJxU1f"
		+ "cblcpkgkMvGH99j0DlcP3AxmAOTVjBM07NsPLwwQA2AGMK+NsWaezQys82kshUKh"
		+ "r81NCFFaT2z28dPjWvsMYJ6klHsBfCC2MHr9VjY+PDgXxGpv3Ll/8t7tyTPGaADY"
		+ "1yhhEgAelH961qGjJ7D85eNbIupaCVOq+PuXPi2gb+V2O6iUylNT0XYYwBSAIwFt"
		+ "8Sul1FCj8wsniMXZgdvGFwAAAABJRU5ErkJggg==";
const
More_30_png = "iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDDAbeTvbowAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAI5SURBVEjH7VdNaxNR"
		+ "FD33zovECdNCIBVdiBT8QMwQ6ELblUZJFxZFTXThD7BWcGEWaneKoBSU9Be4CMZW"
		+ "Qwt1U6HVhRtbMIQZFy4s+IVio1FDC7Gdec+FDdSS2KZkKtIeeIvHeZdzP3lcwgJM"
		+ "07wM4KrrOs3MGhoJJV2wJqYAXLAs6zEA0IKoDWCf48zL42fPzb6xnz8AETVIVjW3"
		+ "tp1+Nnw3oAnBAF5alhUm0zS7ADw6cLBztr+/75QfKMMDTL2fbuq9fuv+q8nxAIAY"
		+ "maY5RsyHBoZHT+zaHioxs6pl7DgOZbPZFiJSf8akKB6PTwshattKSZMTEy0953sG"
		+ "lJJPBAAHSrl7dmz5sZzXpVKJk8nkYDUuFosdDgaDbi1bwaw62tuLRHCUwhwD2IS1"
		+ "w7xSv5PC8Kimy4Hxj/B/CLuuS6vhqjZbPY8Nw3Cj0ei1pSMnpSTDMFzPhP1+v0qn"
		+ "008bkeq6hAuFgohEImPVuHw+fyQUCjme1FjTNLUabmOc1qdwXV2t67pKJBKXiEgu"
		+ "+RZZ13Xl5RzLVCqVW/OIi8WiFg6Hx6txtm3/9T/eaK71KcxERN/LMuC12Kcv35pA"
		+ "xACYAeSkUmIwk9m5Ik+ZZzRNKy4+zDyzEtt7D0eOKSk1ADkyTXMrgI/EGrqv3LzT"
		+ "faZzxItoe2/cPjk6lLnoug4AbKusMF0AhuZ+ln172zow/e61XVlvGrHDkG9z+Ovn"
		+ "DxDCJwG0Wpb1lhYtbbsB9AHY71GJX1iWdbRy+QW76ssg9QFwKQAAAABJRU5ErkJg"
		+ "gg==";
const
Next_20H_png = "iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDC8LqdbFWQAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAKOSURBVDjLpZRdSJNR"
		+ "HMafc847dVsGXpVjLR221ODVOdEkhAxvIrqIQhIMSizBPujDiD60FdVFBZpZZlQk"
		+ "0Y0UQd4EQUVoRd1GkkZODZ0fc2xm27v3fc/pwjRDnZs9l+f8+Z3nf55z/iTX6aJa"
		+ "JFRCmXQcgAmAQPxiANwA3ki6Gt5nXe+8V7WnzJ1ht6dIjMRF4kJg0OuD+8zJV4qi"
		+ "uIgsy0rz3QfniwtdKv5Dbz99Tj28v6KMAphwpNsSAUAIweOBqJoeVDU9CACWFJMG"
		+ "IQQFQBidbvPCxcvFbY/bB8IRbUmYp3/QmJ62tmWD7KwLhSIqm74qQecW9X3vtZ07"
		+ "XduenZVZ7p9UJkWUeAb6+wgANhXwrfB4+mbX/wFSSjnXdSjhkCtXzmrdsXNX0oQ/"
		+ "uGBKhBCI6RMFmxMkXcyBFlHw8cO7S3l5zmNNrY/sms5jCo1G2ySEQI2ELVfqa2vy"
		+ "CzZWPn3+wi+EWD5w9tVKEsa8P3KOHqpuLigs2j46Nh4Qi3wAGvsjIeBcN454h/Kf"
		+ "dbzcZmBMWzZQCC4olVCypbS+q+t9Y3Vleaem64aFaqWljRE4sp2DLTcbGzMzHZQA"
		+ "v6KVS1FswWQ2KU0tbWe3lm6KuRs6nyNAKJ2s2FvV0dPTe+IPbJ50XddnehBCaAs6"
		+ "1FTV7Cra3Nlw/errjHRrAEDSYk4sVpvJaDSqhJCQxWozj496/wLDqk4A4Nbt1ofJ"
		+ "ySZOyNIjzJFh93/p7j7FGBOMUjasC4AQQgGs+vrN4wOAlSvNMcFmlGAwUEYpA4CR"
		+ "wM8pwXkKkWX5QGJC4rUbd+7Xpq1ZnWqgJK4Jq3GBoVFf4MjBmobgxNg6IufkUHBe"
		+ "RxhzC86HlzlfUwXnuwljT34DENkCVsifEoQAAAAASUVORK5CYII=";
const
Next_20_png = "iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDC4i8n9sdAAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAJ8SURBVDjLpZRNSNRB"
		+ "GMafmfn/XUv3kIe2TDGzXDZ1dVGLtA8Vi7p1MgkyzCKC6BAVUpiLoBSuVAZmJbGh"
		+ "ZK4FUteQitJTUFTYEhlWFvahLVau/495O6ShsLq7+hxnXn7zzDvPvCzHlcsNbaKY"
		+ "C+U4gKUACNFLAHADeKiYerByxVpnW2lh3qG0NamcM7BoSARGn0ZG47xXL/dKolyF"
		+ "cdGyr2x3WcXePV+xCCXYko956k71cACjrqwMDQCIKKrr6oYZ1A0zCAA2Kx8DEXEA"
		+ "DCAGAPsrD1bV1J1TgpoRFvb4SV9C6uqUpxlOV3cgME6K4ABAfGbRx6HBNG9bywN7"
		+ "+rqm4e9/+Hx+X798EQ9A/A78iO/v74ubXp8F5JxLaZowdC23ID+zd2tRcf7g0OfY"
		+ "ud5jqkNEJBESOFOGNol3b/2NJUVbblTXNu4wTGlG0lc+3yZjDLoWTPS2ek47s13N"
		+ "Tc3XrOHejUeUWkVBYOyb66Kn3pfpzKkdGHhjLgo45RdSmkvGA2Mb2rvuH1AVMblg"
		+ "IJEkxjgcjswTvu67VQ3ukzd1w7SEqlXCG2NISrEPuc+eObpr5/Zf4f6lMo8tKDHq"
		+ "ZHXN+YojVeUjkTZGCREucCHGCzZvu9d1q/0KYyzkoVL+Dx+bGcRZPTR03WrPynt0"
		+ "29dT6evsuD4XDADsDoehqKoeo6oTGzcV6rMc6vJftjo6u6uTEpcHGQs/wUpLikf8"
		+ "fn+pqqokOOe6KQHGGAdge/b8FQAgeZUtIti0Yi0WJjjnAPBTg4WkXKYAONx6yeO1"
		+ "Wq1l69PTYgWjqAasSYT3H4aNCw31bSBax5zZ2RxS1jAh3CTllwXO15UkZTkT4s5f"
		+ "TID9dCNkGc4AAAAASUVORK5CYII=";
const
Next_30H_png = "iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDC8nmw6pugAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAO2SURBVEjHvZd5TBRX"
		+ "HMe/783szh4s19ZlY8qhabW2dv5gSTRSomka/yAaAaGFbvBKV+2BNfEPo0CVeJvW"
		+ "I61HSKt40EOw1AVqjdWQbYqJNTWOR9E0TRPdNIa67MKyu7PMzvMPWWKqVZZl+P75"
		+ "5vfm847vm+8bgmGJojgDwCoAWdBGUQC7JEm6BQBkGLodwAaAMICp2nAJBRgB4JIk"
		+ "6UsiiuJSAE1iUXGwxlW9ceYr0/UmgRu/aSoqgpFYqPlUq7dxz7aTlOMsAOxEFMX7"
		+ "VqvV1t7RWWs0GKKUEqbRUsN96U5Pw5rqDiUa6aYAbM7lrjNmk1HWEgoAb7w+JWdI"
		+ "DnsAZFMASE8xGrQAheUhAICqqgQAzAJnIoRwAEABgKdkpDgUjgROf39mYXAwnNRg"
		+ "1q2vz31pau6n5ZVLdgcCAQEABB0deU6f8B5Y39qPa2a8XVm59eeLXdNiMTVhp8lR"
		+ "5b7b3VYDEHR7ztOjx79+67819Gm+V9UYrv1+BcuWVK9c/f4Hdddv3ZmWCFjQ8wOh"
		+ "/r5HLyMUvt5/IqMBj4gxFT92tlvKF5eu3LP/4Ip797wZYzrBhCAhcFzBfj8+273t"
		+ "1bKy0trWH84ukmU56YNOEyn2er1Y86GraNkK1+aLnstzJww8bD54ui4Yne8sWlhb"
		+ "3/DRtZu3X5sQ8EhHStF0pDGvurJ8+ReHj1T4+vyWCQHH9cDnw44t9bMqKio2HTvx"
		+ "TfGEgeP64+YN9kn9xje/bTs/K556zxKfPJKB1wmwT8650dJyam/2ZFsmAKY52GhK"
		+ "Heo4e27+y1NyCjiOZI6235jAjDG8YM+Bw+GoaTz0uUnHU8doZpkUWKc34MXs3NOe"
		+ "rgttAOyUkthYBp8QOMViuer+6dd90/OskwDYNf2AqGoMeoPZW9ewc+ntnp7mYWjS"
		+ "4p8VEIRQX3GJs/XA/l3X9Ty1JbCPKq8XoERlgDHoDabIc8GqqhIwxsSCub+dOPbV"
		+ "oUkZ5kwAQiLmGRiU85So3ACgllDKv1vlvPxcsCAISnNL+455hQ4eQOZYltFiFvR/"
		+ "/vX33ebWzrLSBfOzrWkm41PBwYiSEm/gOH7qvEJH0ntoFHTp7zlL0h9vC8kxCOY0"
		+ "izwYAAUQvdT9S2EoIguPQlu7W+YDmSnhfp8IIMJlZWXd9fv7SzjC8vLz869oeb11"
		+ "VlXVDfh9RgA2IooiAdCSmpaxuGD2nKGiObPP6TgybuGhqAy9vgD57mRT4b+9vakg"
		+ "ZKckSRvIYz9tWwGsH5/g+J80AUokSXIDwEPr60kvEI3h5gAAAABJRU5ErkJggg==";
const
Next_30_png = "iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDC4NWa5RLQAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAOwSURBVEjHvZd9bFNV"
		+ "GMafc+7tve0tzdZltpsRTIiBjCxXY3CRGJXIEi0zcV8MRiIwcXZZljmJcU6MwQ8M"
		+ "YxOZkg0mMcQiyOrEOgYkECMEmDEG55VMwzZGBNTFdGyla++9u+3xj42xEJB13d3z"
		+ "73nf/HKe8573PYdgQrIsZwHwAnDDHOkA6hVF6QEAMgH9EEAdQBjA4uZwCQUYAVCu"
		+ "KMpeIsvyegD7FuWsCJfme9Y+l/tMSBK52dumEUdYjek7drXYAvtbv6Uc5wCQQWRZ"
		+ "HpQkyfVNoGOlKz0tylHKTLIaX5xQWNNb5acMXT1HAbieXL5id6YrPWImFACeX5Y1"
		+ "NqZFTwOYTwFAsgqCGaCoNgYAMGIxAgB2kRMIIRwAUACg5Fbw9eFhfct7Wyuv/RO0"
		+ "JwNdtWZd7kMLH/zh6VzP95f6+yUAEC10cp3enhAzjOje1t3Li4sLOz/e+clSTTf4"
		+ "RKGaboS7fz3/NkDQ29NNP2pqLr89ht4pkbE4/hzoQ2NDfWNeXt7XgaMnlyYCFgVe"
		+ "jYSuj18iQhEcvKpPCzxVv/dcSN30amWjt7Jm+7muH2fUXAghSBgMAGpkFEcC/pyN"
		+ "L5Uden/7p9XBYNCSbOHRRIJDoRBamuoLC4tLAnv2+UvnDDzeYxn6Lv4hbamr9haX"
		+ "rG1u7zj5xJyAJxMpRdfZU0tqX/Nurap5s663/7JzTsCTTSKq4rDf92zJqqLDr7+x"
		+ "2Ttn4Jsa/Psv5m87UNqwy7f65tT7P/HJIxl4iwhXxgMXWj/bU/FIdpYFADMdbLXN"
		+ "G/MdOCTnPPpwBs/TaV+zGYEZY0jPWID7MzPLOgLtVyw8dU9nl0mBLYIVKanOr375"
		+ "uasBgINSMiOnEgILgnC+rfNMzWNLMikAh6kNJB6PQbDar617ueqFgYGBTRPQpMXf"
		+ "/RzjIIQOPf7Uyv0Hfa1+niOJuMN4QYShawBjEG3zIvcEG4ZBwBhbLC/7qe2gr+o+"
		+ "p10CwCVSPDdGtTRD194FsJlQyldUeNvvCXY6nca2Hc2vvLgmfwSANBMbHXaR67t0"
		+ "+VjDzpbOsg3r7fPdKeyOYNWA81YBiWkT0KRkEy3Wd2qrMdWpiBaDaE9xaKMjoAD0"
		+ "nt+6C/4dGrGND23zXplXI0iNhoZkACrndruvqKqa3997Mdvj8Rw383m7uqjgy2g4"
		+ "JAFwEVmWCQC/1WotWrBwkZ6dtfhzniOzNjxicYbhG2Gh68zpgkg4nAJCtimKUkem"
		+ "fNo+AFA7O4PjLtMEyFcU5TsA+A95aUxqGOPcSQAAAABJRU5ErkJggg==";
const
PlayPause_20H_png = "iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDDMTXM0AUgAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAJnSURBVDjLpZRPSBRR"
		+ "HMe/782MM6a7m24pBtkp3JVY3M2gpKDsVBB1sFLXEnc1CjpUhyjNgbWE/EMqkX8C"
		+ "oexQ5K1DUGBFHoxwtaBrl8KMSKvd3J1xZt7r0CqVa+2239t7fPm8976/3/uRMq9P"
		+ "YOZiNeM4C0ABwJG2iCAINATgvsgs45LsKGw9faLhVn6eY4FznhaQEEI+f4naOtpD"
		+ "92RFmRM5iHo11NJTWblnFhkoJ79w+PLFM6M0W8mOFxdvjCYzMcZIqsAiR9acJEmE"
		+ "Apz9+srOrmulgWDjXk3XGaWUB5tOVoWnXtlSyJYDsGgih+Xdnp7uwNMnY/v6enu9"
		+ "ADD5cmKL31974VDVkXoOsH/dlK4IGQClFIZhSInDmGUa8pvpsMdTVt45MHSz1DRZ"
		+ "6sBVjYIAPRYRu7s6AzsqKs4PDt8pS5YzTbeaAqX49nW+oOOKWne4us4fnn5tywi4"
		+ "JEmSMD35wuuvrVHrg6d8iixbGQEZYxBFST9ac/zx7eGBqbimiQAg/g9M0+LYuWv3"
		+ "I1VVx10lm7VE8XhaQM45KBXgXOd8d3f0wdCmDU49mU9M3p+/V88yTdgcTqO5pbnv"
		+ "4IH9nxRFWbVvVgDXFxTNa/GF3PJt29/+DD9LrzkWeNje1jqWaNO/agVw/PmzjpkP"
		+ "s7LbVRIDgJGRkX632xVJBbYEpJzzZbPdbrfsdntsae12u6KpwAghhHMQqmlazvuZ"
		+ "j7mZjC5wjgXTosbiYg7xeDwhWVmj9vffaMtb62BpzlcAQCQSlRqCTS1g+lbi9foE"
		+ "yzQGqSA2Kor8HSlMlD+/eTyu5XJmnSOCeP0HNF3mHIbOMvgAAAAASUVORK5CYII=";
const
PlayPause_20_png = "iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDDMjehQw/gAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAJxSURBVDjLpZPfS5NR"
		+ "GMe/57zn1eWEmaYbQRFUEGGi8yIwzUWBlenCLAhCrciLIuYis4hmZRKGkUTL8CLF"
		+ "lAxLKIwS+xtCwZqSF0IQXVRLnT+29z3n6cYFmeKm37tzznM+z+H7PQ/LznFyZUZK"
		+ "ieAFY0kACPGLc85vAegXShredesdd8vdh29bLYk/pFJxATVNY5MzkYyujrY3QugF"
		+ "AozfO3+2srqi4tQ4Vq9A6sYt9f4mXx9P0PXQtu1bg0tVmabJYiXatPCEEIJxIjJJ"
		+ "KRU9qPFe3nekxH16cmqaCyHoaNnx2rfvBx0rAYmUUkqZHMA/r+jt7akfHvpYebXu"
		+ "igsAPo8M53kuXni6v+hQAwF8xXT+66QUOOcIh8MJAMAYU6YRSRoPfCrIzMoZuH7D"
		+ "lx+OSB4zcNlCTcPs9G+9+1nnndxcZ0dDU0sRAEgp2aqAUTHGMBOa2tzmv3/tYLH7"
		+ "Zv+7AfuagFEJTSAwMuS6VOPpcR87WWaxJJprAhIRhNBnDxSVdL5+9bxvbm5eBwCx"
		+ "GphhRLAzM7u73ud7uSdvd3DBCooLSETgmobk5ORA14v+uqwdm6aWtGKJqwAApVQ0"
		+ "PZJSIiU1PVxZVeU5d6byi81mk8t6u3gjNS39+0wolJKX7xoFACH0+eLS8vYn/gcd"
		+ "i4cgJuCHwcGK0bExq6twbxAA/I9bPa7Cgp+xwAAwwRjjYPxv2g6HPeJw2CPR9QIs"
		+ "lv/JAAZuGIZt4uu3NKxFRJAJFquS0iaIqPbRw5Y2mzXpRIZ9g6GkpHiSB2M8+CuY"
		+ "2NzY2AqmdrEcp5NLw2jWhO4VQgsSkYpzFDXDMFOUNKuZJtr/AHZ08sA7I9FuAAAA"
		+ "AElFTkSuQmCC";
const
PlayPause_30H_png = "iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDDMCNn0goAAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAANISURBVEjHvdd/TFZV"
		+ "GMDx7znvhRcRpoTmD5ByqUvnvGLiCygWOHFoNcs/KkVYrWZrJoiCFKYEiXPLNadF"
		+ "izYzk+Fc5miMOTeZqbTmr25brlEsa29EIweTN7D3cs/pn5dNZG8reO/7/HfPc+79"
		+ "nJ179pxzBKEwTTMT2AlMxZ2wgT2WZbUDiBD6KbAZ0EIIAB1hVGiNCH222rKst4Vp"
		+ "mm8C+2bMWeSvrixr9C1d3OMCzPmLX6eWl27d5jiOBGYL0zTvKKUSz7ddqJqSnPQ3"
		+ "Lsb1H7tnFm9YU+aRokMqpRKzcgtuuo0CLJk7vWvmrIcGgakSYKLH9hOlEI79J4AM"
		+ "PY/6p7d+9RsV5eU5H3zYkAao4fbyyt0F17/9LmnstHYAjHDpdWvX7bKDg0nKcQj8"
		+ "NVBfsaOkE6D9YtujZ06fWrV67TNN7+6vuRI/IVaMhZfhEoH+viQA6fHQ2fH93BHT"
		+ "heZcy+fPZy3Prtuxqyo7ovAISEg9uk0wGLjjbT596tm8/CdLW1rPzoo4/O+DAv+t"
		+ "jtStr20pKVi/8Tn/73/ERAUejpiYWDpvXs1YnZdb+9KW1zdFDR4OxxkyLpxrSV+W"
		+ "tbL6wMHDjwFDUYEBPIZB3+3uhIb6Qy/4lucd+KyxKeX+AUg3i4WUkt4ev/ed2trt"
		+ "23ZWPXJvznATVkqxcHHGbyUlpSdzc3xdrsNKKRInPdC/8olVZw8d3H9ZKTXKiTis"
		+ "tcKXtaL1xPFPvgTiAY+Uo+uAERlMY9s2GZk51pH36xunJSfYITRsGOMU0cCM1Ie7"
		+ "X36x8IuiouLO/7poxwUnTkpmzVPr99Xtrez9v++Ghb1x8XfRTpzjODw4PaVr5OLR"
		+ "bCx+pfWNirKvJngNeyyDDgs3Np2sq9m7e0Pa7Hk/1FS/dWO475x5839+7/CRhmVL"
		+ "0gPjma2w8NL0RQPNzc3H7+937OjHZyJSXEI7jIra0Sd0mpEAtwfUgmjBNsa0UDmV"
		+ "zo32trSe3v44t9G+IWTXLz9NBIIS2COEEEWFm7YDQRdd/XR+flWs1wuQIkzTFMAl"
		+ "rVS2Nz7Bzlzx+LU46fRqrcd9mxBC4CjlCQwEJ1+78o3PDt5FCHHCsqxCcc+l7RhQ"
		+ "6OJWqYFXLcv6COAfDRUpOVP7O08AAAAASUVORK5CYII=";
const
PlayPause_30_png = "iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDDIrbdSJjQAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAANXSURBVEjHvZd/TJR1"
		+ "HMdf3+fuZDCFI2NHY1DXyMwZz1xaOqyjxoWaLLOMZdwf1Vmw0WzDf1ouz6u0QTDn"
		+ "UZ2gKH/odE2N0imumDRbsJnxsF2p2egX1GxJEr+64/l++6OjCYUtvOfefz6f7/b6"
		+ "fJ/v5/1+vo8gLl3XFwEbgSysUQwIGoZxDkDEoe8AlYASQiilVEKJQgiUQgMFsMkw"
		+ "jDqh6/qLwE7X7Qu/3ljpr1nlLfoOiCZ4t7MOHjmWX/vGlgbTNDUgV+i6fkVKmdl6"
		+ "7MQj7rycYSzUJz0/FFT5SndqAkOTUmYuLVpx1moowAMFuT05t7qHgGxNCMHowE8R"
		+ "kqSx36/2AWgApmmaUxd80RNxPrlu3ROvvLp1MfGpAPA9s8F/6qPTuTMFm+Z4DMA+"
		+ "3YLy9eubRoYHs7q6uhgb/WNzXe22MwDdZzvvPdPRXv7gw6Xv1tVsO5qZnjajQdSm"
		+ "KwxevZIFoNlsnP+y+85JRSVpP/l+5fLCZa0vVL30dELBU5yo/s2bI0ODqW3HWzcU"
		+ "erxNTXv2LbQAfJ2WgP7vL90RDGxuWPHoU4HIhW/SkwKekN3u4EJPZ9Ga1SsPl5U/"
		+ "FwBsSQFPaHw85vis41TRosXLDm96eUspIJMCBrDZ7fz268/O9w7sq76v8KG2N2vr"
		+ "757agGZlWGiaxuX+3tTdjbtCPn+VZ9LRWAmWUjLvLv2S//mKt8rWrjpvOVhKSbpz"
		+ "7sCSpYWHmneFDpim+Y9BSzhYKcn8BQUtbSc+bI67TbPZbMoSsFLqr9e6QO8IN7bU"
		+ "5OfdNDRxyZjWfjdIRCFw3ZL3bYnXsyMYfK37mlzBMvAc580Ur1xdXb898Pn/Dpzp"
		+ "Cqlps0di0bE00zTJyXX/ODm4BaWPlbW8Htx6KGP2rJGEfiRCb4f9Lpfr9HJPcagx"
		+ "3HBy4nmeOz/SuKfZF6rfvnem0OvuuKTY019S3BmY2uDxD47uSEi4/O2BZEkpE0BT"
		+ "SpGSmX1/sripGXPd8TjVYuc+bZ/X2/9LhtXQy+M4+3ovpgNRDagWQogK/7NhwLQS"
		+ "/LjXu9vucADcJnRdF0CbktKbkjYnqt+z5OPo0ECflDIh526zO1JMbNkXv4qUjI0O"
		+ "I4QIG4ZRKa75aWsAKv7r5nAjYwX4DMPYD/AnnI80YZBKOlEAAAAASUVORK5CYII=";
const
Share_40H_png = "iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDCk2p+QuzgAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAbqSURBVFjDxZhtTFTp"
		+ "Fcf/z30bmDu8OeOydSoGdNiim6nMoGA03aHUNGE3kVrsapqWzMYo2Wq0rRvWWDEh"
		+ "YyICVes2wJdVm+KKWQqudC2WrOzioNasrhNf2FGptQxdiszyMu937n36oYzB7oCA"
		+ "M/R8m3meO/c355znf85zCCbMaDRyALYDsAIw4/9nHwA45HA4HABAJgH+A0AGpRR+"
		+ "zzgCkgSeF+aNSpZCSFDxSBCTASAM4IbD4cgnE3B3AeSEgkF8t+C14Y0/fetvP1mf"
		+ "7wTwz3n03OL3/tRjPvd+7cqBvl4Nx/MA0E2MRmMugOthKcT+aHPZfVvlu38A4I8H"
		+ "QUdHx8tVVVUbxsfHRUIIBQBZlklxcfGVw4cPXwGAIJD4zm8O/exS2x+zGZZViNFo"
		+ "/D1A39bpszwXP247xFAajDwcS6upqVlhs9msoiiCEPLMWjAYhE6nc3d0dBxZsmSJ"
		+ "/8v7D18uK/v5L/1eD8sAGJFlGcuWZn3JAoF4wDU0NGTX1dVZNRrNN+AAQKVSYWxs"
		+ "bEFhYeG7vb29mlcMS78y569zh8NhMADWAwRE8o3HK7lqa2s3syw77R5CCLxer9ja"
		+ "2roUACTP8BcMw4AB8Ek8M7+qqso0MjKSPJO9HMfh2LFjmwGAYTmeUgoGABtPwL6+"
		+ "voXP895k8/v9/OTPTLy1w263m2cD+L8WF0CHw5G8Y8eO72VkZNh8Pt+CaAdjpsbF"
		+ "Gu7gwYMrGxsb3wyFQjzDMJgNnKIosFgsV+IC2NTUlFFRUbEjGAwygiDQuYSVUors"
		+ "7OyBmAJWVVXlnj17dv3g4OBLgiBAEIRnavzTWivLAICpwEOhEEwm083q6uqrzwX0"
		+ "+Xzs+fPn9Tab7c3Hjx+nR8IkiqJcVFR0af/+/d3d3d0v7du37xfhcBiCINAJsG+Y"
		+ "JElITk4etVgsVwKBgGC329d4vd7EyG/yPK9wHOe32WwnrVbr32eUg5s2bdp4586d"
		+ "laFQSKXRaCYvsRcvXvxBT09PwejoqGY6jwGAx+PB8ePH3ysqKvpKr9cHhoeH+UeP"
		+ "HvU8ePAgKQKYmpoayszM9BgMBu+MDsn27du/f/369Xye56MmOMuy8Pv9mqk8pigK"
		+ "WJZV1Gr1v1wu15HJa1qtVtJqtSNms3lkzjLT0tJSzPP8nPIxEAigoKCgp6mp6bDT"
		+ "6TwSi8PHTfKMUlpaWjKVZ6Y6eJIkkYSEBFmtVrtcLtfvJrxIYqUOz4RYrVYHKKUz"
		+ "1i6fz0dOnjz5W41GEy4qKvr307AwTMw6oheuJJRSrFq1yh2vUslMehERRTFI6cz/"
		+ "vFqtptu2bftVXl7eO+Xl5YVxBVQUhdTX118KhUKzeZ7wPA+v16ttbW19PSUlpba5"
		+ "uXmx2+3m4xbiurq6+ojqzyqZOQ4ajQY7d+7cZTKZ9t6+fTsp5ocEAKxW68Pe3t4P"
		+ "T58+XSJJEje54FNKoSgKCCGglEYtWzzPQ5KkJIvFcmDFihV39+7d+3FeXp5bp9OF"
		+ "JoRafCGhBoDq6uqrJSUlzsrKytcHBgYW9ff3L2QYBnq9fshkMt0qKyu70dzc/Oq5"
		+ "c+eKOY6jUSoJUalUcDqdy7du3fodjuM8J06cqG9sbCy4du3a6mil7sCBA1FLHTEa"
		+ "jTWyLO9Zt25dV0NDQ/uMLtmyTFiWpQCQk5Pza7/fvyAQCKim6WBoKBQiLMs+t1m4"
		+ "cOHCaYZhaHl5+RuXL1+2zElmInCyLJN79+7VtbS01JSWln7k8XimPEyCIGC6FkwQ"
		+ "BNy6dSu3oqKiIGbtVgTUbDaPmM3mz5YtW/bk1KlTP3S73TpJklSz7aQJIXA6nYvi"
		+ "1vLv3r377s2bN4+0t7cfyszMvD+NR6NLCsOgq6trTdzvJMuXL/fY7fbGo0eP1icn"
		+ "J7tnI/7zcmmKhN5qtT7Mz8//fC66Om/XzqysrKHZACYmJkpRACm4BDEtHoCVlZU3"
		+ "UlNTx2ayNxwOY9euXWcAQNCkpWFissAwhKD/iXdxvKYMe/bsOfM8L1JKIYqid8OG"
		+ "DX3+YFC4+mlnJsvxYNPT07WEMD8eGRpITEtKevCq0fh1rAHz8vKGKaWuzs7O3GhX"
		+ "iWAwiLS0NHdnZ2etwWDwfnD+k62f/vXPiwghYAcHB2+np6dvpFRO73VjlWHJwjuL"
		+ "9d/2A1BiCbl27dqh1atXf+FwOLQcx/lFURwTRXEsISFhfMuWLX9pa2s7k5KaqnzU"
		+ "9flbb28pfiUlTQcAjsgIWAvgCVUUEJZDTu6aYUPmt1y+0a/7J9IgNq0TwyhRu21K"
		+ "KZOky/iso13vGR/TMgwBpdQF4OmMmgWQCOAxgDSqyJAViheZqcy+NVfA8gLwX828"
		+ "C6AQwNAzBEaj0QDACOC1iUn7fBsHwO5wOJojX/wHDS3Tzt+lGcMAAAAASUVORK5C"
		+ "YII=";
const
Share_40_png = "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"
		+ "l+vL14X/AehP5Z8iVV2+AAAAAElFTkSuQmCC";
const
Share_60H_png = "iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDCkmulM+qgAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAh1SURBVGje5Zt9UFPZ"
		+ "FcDPfS8vCZA1CwFFPkQFBXbWJ+pCQ6m4SnEqlrqOVWudcVtFKqPT0dk4XcWudcus"
		+ "2IG1tY66o4MODtpdofKhuE5cGbEun/LxKvKhUEEXBEJcmJAPkvdu/9iEhkgkaGIe"
		+ "9sw8Jjnvvvvyu/fcc885vIdgHKFpejUAbAaATTB1JZVhmNO2SjQOLIY3S7wYhtGO"
		+ "C0zT9PcAILXWGXRaMHEcCAQU78k4kxEEAgIokaftqf8wDDN3DDBN08/MsAgQAqHX"
		+ "2zBv1szaD3akozXL3n0oAqjhO3CPHqIvfX13buW1i9F1ZYUg8pAAAAbzn1aGYSKR"
		+ "GVYGACrLhSMGA5TWtlTPkcBXfIHRaDTk8PCwwFaPMQZ/f3+DrT6/ybjhT+sXxJCU"
		+ "yFrti2zXrVGvhYKbdcWRgW+VuxuSZVlEkiSOjY3d0dvbG6jVaj2eM2OOg4CAgO6G"
		+ "hobPbc993fg0/uMPV/0CY25UR9A0vXN0ZvVayC5pus0XWKVSOUMqlWZ1dnaGGQwG"
		+ "D5IkwfagKAr6+/sDfH19s5YvX/5b6z5+ttC/POHnvwSWNY1OKAEAo+YQGr0SVs0X"
		+ "FvHFhDdv3qyQSCSAEJqwvUgkgra2tncWLlz4kbU+OyNdQZAUsgYeFfGI6gFf1uyi"
		+ "RYs+EYvFk70M9ff3z4yIiNhvrYyOWw7WwCmjDoA1GfgAm5ycvEGv13u+zLUIIRga"
		+ "GvK5deuWr0X3rOdRgzXwX/m2vVRUVMQ4YsYvgr58+XLE6HeCEFgDS/gEu3379p8K"
		+ "hcJX7ic3N/eD8fQE32Z3eHhY/Cqzaz3LUwKYIAjOpf3zDVipVK5444GPHz8ekZCQ"
		+ "sMXPzy9LIBC4NFsTuBM0Nzd3Tnp6+o6RkRFSIBCA2VkhZ/TNcRy/gFNTUxOuXLmy"
		+ "CiEEAoHzf8aePXsuuBXYkgjEx8entLe3h5u/u/R+bl3D58+fnyOVSrPa29vDAcBl"
		+ "sBzHwezZsx8cOnTorlNmeLyRI0kS22u7a9eu94uKilYjhEAikThtjdqTkJCQ9jt3"
		+ "7nzxyk5LLpenCYXCkebm5kiCGGsYQUFBXYmJiVWZmZlVFtONiYnZ1d3dPYtlWcK2"
		+ "vSNiMBhALpfXREZGduXl5a2bIBjBWq0WZWdnn9y6dWv7K3npnJyc0MLCwsWPHz8O"
		+ "BQAYL+x7+vTprLNnz846d+7c+gMHDpxJT09PkUgk+IcwdlKwWK/Xo5iYmLpr166N"
		+ "Op22trYgk8lEVlZWvme7FAIDA5/IZDL1jRs3cu2tW4eBnzx5It63b1+aI17U0ubw"
		+ "4cMpL2m6mOM4NDAwoLA9UVRUdMn88R8v6sDe0nLIaZ05cyZsyZIlGa7YMmxBNRoN"
		+ "5OfnH+7p6VG4+mZ2aQoKCqJdCcuyLJAkiaOiomqvXr36pSPm6FLg6urqJS9RcZh4"
		+ "OjEGkUikS05OVh47dqx8MuboMmC5XJ7mAlis0WjQzZs3M6KiogZfF6BDa9iJKRo2"
		+ "GAyAMYa4uLh/DQ4OKtwJ6/LQUq/XP+d13Qn72kLL1+WQ3A4sFouxt7d31rZt21Zq"
		+ "tVqSt8C+vr5qe/nkZEtLnp6eoFQqE0NCQo4kJSX9qry83Jd3wMXFxZdGRkaceiOh"
		+ "UAgNDQ3vbdq06Q9BQUF/cZep2zXpxYsXNzr7ZuYEAGGMkY+PT9bGjRvXvG5wu8BK"
		+ "pfL89OnTv3OSaT/H7uHhARUVFT+RSqVZ169f9+eF06qvrz8aGBjY5cofIJFIICUl"
		+ "5aPg4OAjHR0dnq4GnnAfrq2tPZaUlLSpqqrqhaGmyWQCgiDAw8NDp9FoPCiKmpSp"
		+ "cxxHyuXyT2fMmPF0wYIFLRcuXLhiya3XrFmz3tH0cKJ93qHAo7S09CIAXJTL5WkU"
		+ "RRlbW1sjEEKAMYbw8PBWjuOIpUuXNmRmZlYBAJw4cSI8Nzc3oaOjYy5FUdjRVJGi"
		+ "KFCr1f5lZWX+Uqn0/VOnTv29rq4uoKam5kcIIRhvwPv6+oL6+voCvb29sxwpACCa"
		+ "plMA4DQAQFhY2L2CgoJzkwkkXlTeIUkSy2SyLFckIfYkODi4vbKy8qS1bt26db95"
		+ "+PDhuy8deJAkiS3Hi9qwLIsGBgYUe/fuzSFJ0mg0Gl0O3NnZGRoXF/c7t0RalgHZ"
		+ "vXv3/a6urn0ZGRlfWJIJl3lhgoBHjx7NO3jw4BK3xdIWSU1NfaBSqRTe3t79CCHu"
		+ "dQy2W4Et0tTUdKS0tDRj586d53U6HYD5YSpnytGjR3/NG2AAAJqmh/bv39+oVqsV"
		+ "UVFRd3U6nVNN3V61lBf/PSwuLv5SrVYrfHx8+gmCME35fNjR9Xbv3r0j8fHxt994"
		+ "4DE1IYzR/xWwl5eX3hlr2V4fvAM+ffr0DWfk4lu2bCmcEJjylM7kA3RsbGz1q8wy"
		+ "xhjWrl3bMsol8Zk5LrBKY5LxAbikpOQrsVisfVnYadOmqZctW6YCADAByOorbsms"
		+ "gUfzuO7mKvhn4/ef8AG6vr7+U71eP2lePz+/npaWls8sihXLln8sskpeCIZhLJkF"
		+ "pkRiSN8Q/db9fzNerIu9pQOFATYvLy9Lo9E4FJAYDAaYP3/+/cbGxmyL7pv6jrSh"
		+ "wWfIXFrCAD88L40YhkGWnFUo9kSfXbx9yISQyN17c2JiYu/g4KAiJCTkoUgk0rEs"
		+ "C7aH0WgEPz+/bpVKpSgrKztruf7b5ifbPlz947lWg4UYhkHW7zw0A0A4ACDAGDgA"
		+ "7m/53xpWzJf8kQ8mPplXAD6/8d2fc36fICIpkcVHjX3nwQp6jO2M6HUQGhUHgX7S"
		+ "oaGBXt48S21PRG/PnFfxTck0AUmAQDim6KBkGGYlwNi3WhDDMJim6RbzTE91sZSW"
		+ "WhmG+d+jxHYymSYAeGeqE5t909ia1gQpXBoAsFOQlWQY5qTFaq1P/BccxISujl8f"
		+ "CQAAAABJRU5ErkJggg==";
const
Share_60_png = "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"
		+ "AAAASUVORK5CYII=";
const
Stop_20H_png = "iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDDUOaZHLDQAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAHoSURBVDjLY9TT0+f4"
		+ "/+9PJgsbR+//f3/f/Pv37x8DCYCZmYXt3///TP/+/om4fPnyDpb///82ymuZBlQU"
		+ "pKcpKCrJsrMwkWTgn78MTHcePuGqqSjerqOjY8ZoZGT8f+rUKakWFhb8DBSAtVt3"
		+ "qzdVFj9h+vfv7ysFJRUZBgqBhCAPEwMj42+Wf//+/WNhYvgPk/j+4xdnSUWt57GD"
		+ "uyQYGRn/o2v8//8/o5S8KkN4aMikuOgwFpg4CzMThEbXkJVb6Ldz63pTRkZGnK55"
		+ "+fIlw92bVyeoqqpFWpoZSCPLMaErPn/muAI+wxgYGBgYGRkZPn/6wLBj64af6HIY"
		+ "BjIy/P9PbLhhs5eJgcpg1EAGhv/ExwkDtvjDMJBfWJyVGLPYObgY+EWkGAkaGBAQ"
		+ "tIyVjR1/CcPCysDJyXk9JTGWC10OI6fkZ6c9VFFSiD17+vhX3K7jZoiJiRbi5eES"
		+ "xzCQiZmZ7efvv3/gTmZi/Ofr7S7u6+1OUmT8/vefgYGBgZGJgYHh/6mz5/9SGrtH"
		+ "jp/R/f/v3weWv3/+pLc31a35x8w+TUdZ9h0bKzMrKQb9/c/AsHnnfss1yxcaMjIx"
		+ "hTLq6+sz/v//35iRkXETIxPTv39/Ed4nKt0xMbP++/fnFSMjk9fFixefAwCzqqLC"
		+ "eAQlZAAAAABJRU5ErkJggg==";
const
Stop_20_png = "iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDDUd7S+K0wAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAHqSURBVDjL7VRNSFRR"
		+ "FP7Oefe9mbHShU3ZtCgGmhYzzRRBROvMn5JAWmiBOyezpIWkFUFEWCtbFUFEULSK"
		+ "IAgiMwgTLBFmMYxQboagTBAjaVxIvHdOq0LmTTYvW/Yt7z3nu+fcc76P0ulMWMU9"
		+ "ZZzwsIq3ICKCALAs44gqi+d2FAqFEaPqXdma2HP0ePvhtmQqGbIZgQg9ZWvmw+y2"
		+ "m8PXnqdSqX3GtkMDXcdaj3R2diwBWMJfYHc6ufBp9vPQg9s3WoyIN5/clXGwRtQa"
		+ "twQiNiIiFumvNr98La3vH7g4+Ob1aIyZtDxRRSi2fSeam5qGBvvPFH+eMxMAwJQn"
		+ "9JzuuzQxNrqfiH5bzcx0DnMfi/d2JBIH29sOuSvvuDw4n5uMr0YGAESE0rdFPHn0"
		+ "0BfoIySoVvtvld5l/GP8JwS0+plAK8jeR1hX32BXQxYK12BjLP7ntWlsbL5rO6HV"
		+ "HcbYiEQi786fO+vTvk8pVy9fGNnSEH019Xbcq7TgqorIulpks1nZHK33eYBhy3KW"
		+ "v7sr/I2kr7d7Gb3dgYYhIAAgBqATU7noWqdbeF9sUZFF47nuyft3bj02NXXX45s2"
		+ "TDu24aCVvRibPDH+8tkBYu6iTCZDqrqXiJ4Ss4jnuYH2ji1bxJ0n4tZ8Pj/3A5Zx"
		+ "qsWDPV9/AAAAAElFTkSuQmCC";
const
Stop_30H_png = "iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDDQ4vzBv1QAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAJzSURBVEjH7ZddSFRB"
		+ "HMXPzL0GRZG4W6JkQtSTNRaU2cMaVKZlT0rsBhsSsYsViH2gYBQEERHVS1AREWEJ"
		+ "amFEFLVQLcHWImvZFJGWmblorYab+bHr3TvTgx8QtBrXvT55XoZh/syPOZxh/kMw"
		+ "LsZYGaQ8LaW0EEqRSAldB1WU9wDKOOc+ACCMsUUABlJSLMjKXoet+YVtij7cIWVi"
		+ "oLqQ+BlVbLVXz8/v7w8TAEWc80eEMXbWYrVWVZ4848+35dxTKNFhgnrDgyvK3K6D"
		+ "n1s/AMBSCimrVrNssd22wTQoACxJXvjlSPWpC4QQANhMhZQo2LGrnVJqGnRCmamL"
		+ "h6SUOgCdUkohooOfMAuap5DJ5KhjA/lXXeypv8178/qli17PAyp0bfogxTSstxUN"
		+ "Vx6raMjLzbZOVavGW3jXGfEePbS3pfd78L9PpKhJePPKA0fxk511jY/tebksI15t"
		+ "3AtbfXjf5VBPlyFLCSG4XXurfqqauOC3zf4F4wk0pJdeDwyB9djojIIU06LGwGZr"
		+ "DjwHngObD5ZSzGhjKYQx8PKVbEbNz6o1m4yBXW7388jIsLHmTggccJc2GHoW9ztL"
		+ "uodGtLr7d2oc3cGv01o3Ya81LQNOpzNQVLClyRAYAMpdjkC5yxEwLVwDA79HZiPJ"
		+ "EU1M5oYKoaMrFC6ZDXBfX18nGfstEEqp0ny39oYM9oSWmQ2+VlNvl1IQAEEK4Lim"
		+ "acS+u7jixevWtNGY+JVYe3UAaKk4cW6b/9nDQgDtnPMmMvlvAq7oQiBrbQ4+8oAv"
		+ "UWBVTVKTrakbfwQ7oKhJ3zjnmX/1tYyxdACNANJNctrHOd8zMfkD71Hzu6TGYn0A"
		+ "AAAASUVORK5CYII=";
const
Stop_30_png = "iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+g"
		+ "vaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEFDDQrO44uCwAAABl0"
		+ "RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAJ7SURBVEjH7ZdfSFNR"
		+ "HMe/59x7CzekMJkk5KJMguDWQxSVIcFCSCOEjKwnLZ2VEZijIEiKHnwtBLF6MiLC"
		+ "yNC0/JMZtQzTYgeRejDJLf8sK4ia29w5p4ea9OBUrrs+7ft0DvcHn3O/53u5vx/B"
		+ "P+m6Xg4pr0kp1xBKEU8JzkEVZRBAOWPMDQBE1/VkAD+TLBasW5+JXdk5A7+/j3mk"
		+ "jA9UShAlxV7YfKfWGgqFCYA8xlgb0XW9xmK1Xigqq2wpP15wY4WmzMAEfRz1b62s"
		+ "cF73ff4EADYlzWbr3Ji1mddUXzyraaopUABIXWWd1FLs7FVXay6APiqkRM4+h0dV"
		+ "zYNGtcGWNCql5AA4pZTi24S3H8uglarCo2sVAAghZK4wNj8fnGq8W1/b09FCBV/Y"
		+ "EB6Zwfa9eYHS0pO3DuXu+TFfrRrrQf/w9NTlqhNDXyd8i34jRdXwvrcDp163HwjX"
		+ "39tfeDAn5mljfrBXXCW3/eNeQ5YSQvCk9VHnfDUxwZ6BN5a5b2Bxetn9FIbAPBJe"
		+ "UpB4JGQMbLYS4AQ4ATYfLKVYWuchhDFwRqa+pOZnk77bGLjwyNHW4HTAWHMnBA4X"
		+ "5NcZ+i2eryju+jUdTn/W9qDki3dkQeui9qauzYDD4XhRVnzsviEwAFS7nA3VLmeD"
		+ "aeEKBALh5UhyKCJmc0OF4OBa8pnlAPvG/UHyd1oglFJloLOlUb71DGWZDW563F4h"
		+ "pSAAfBTAJc45OXe69GZTz7vscEQE4wkLznAAGHO6rlZ5ervzAQwzxvrI7NwE1HEh"
		+ "sGXbDnxg/e54gVVVU1enpu2c9I1AUbVRxpgdAMh/Q1s6gIcA0k1y2s0YK4pu/gCf"
		+ "evQbGmlMhwAAAABJRU5ErkJggg==";

/*
 * ============================================================================
 * Site independent code here!!!!
 * ============================================================================
 */

function xbmc_json_error(response) {
	remove_ui_msg();
	consoloe.log("XBMC JSON Error")
}

function xbmc_json_timeout(response) {
	remove_ui_msg();
	consoloe.log("XBMC JSON Timeout")
}

function execute_anyurl_command(context, command, last_step) {
	anyurl_command = '{"jsonrpc": "2.0", "id" : 1, "method": "Addons.ExecuteAddon", '
			+ '"params": {  "addonid":"script.anyurl.player",'
			+ '"params" : {'
			+ '"mode" : "' + command + '"';
	if (context['title'] != undefined) {
		anyurl_command += ', "title": "' + context['title'] + '"';
	}
	if (context['url'] != undefined) {
		anyurl_command += ', "url" : "' + context['encoded'] + '"';
	}
	if (context['playlistid'] != undefined) {
		anyurl_command += ', "playlistid" : "' + context['playlistid'] + '"';
	}
	if (context['position'] != undefined) {
		anyurl_command += ', "position" : "' + context['position'] + '"';
	}
	if (context['description'] != undefined) {
		anyurl_command += ', "description" : "' + context['description'] + '"';
	}
	anyurl_command += ' } } }';

	GM_xmlhttpRequest({
		method : 'POST',
		url : 'http://' + xbmc_address + '/jsonrpc',
		headers : {
			"Content-type" : "application/json"
		},
		data : anyurl_command,
		onload : last_step
	});
}

function open_video_player(context) {
	GM_xmlhttpRequest({
		method : 'POST',
		url : 'http://' + xbmc_address + '/jsonrpc',
		headers : {
			"Content-type" : "application/json"
		},
		data : '{"jsonrpc": "2.0", "method": "Player.Open", '
				+ '"params":{"item": { "file" : "'
				+ context['encoded'] + '" }}, "id" : 1}',
		onload : function(response) {
			show_ui_msg("PLAYING", 4000);
			console.log('Playing video directly');
			setTimeout(function() {
				local_context = {};
				local_context['position'] = 0;
				local_context['playlistid'] = 1;
				execute_anyurl_command(local_context, 'resolve_plugin', function(response) {
					console.log("Resolve playlist");
				})
			}, 5000)
		}
	});
}

function open_video_playlist(context) {
	setTimeout(function() {
		console.log('Playing new video list');
		GM_xmlhttpRequest({
			method : 'POST',
			url : 'http://' + xbmc_address + '/jsonrpc',
			headers : {
				"Content-type" : "application/json"
			},
			data : '{"jsonrpc": "2.0", "method": "Player.Open", '
					+ '"params":{"item": { "playlistid" : '
					+ xbmc_video_playlist + ' }}, "id" : 1}',
			onload : function(response) {
				console.log('Playing video');
				show_ui_msg("PLAYING", 4000);
			}
		});
	}, 2000);
	/* Resolve the whole playlist, just in case */
	setTimeout(function() {
		local_context = {};
		local_context['position'] = 0;
		local_context['playlistid'] = 1;
		execute_anyurl_command(local_context, 'resolve_plugin', function(response) {
			console.log("Resolve playlist");
		})
	}, 30000)
}

function play_in_new_playlist(context) {
	/* Clear playlist */
	GM_setValue('QUEUE_POSITION', 0);
	context['position'] = 0;
	GM_xmlhttpRequest({
		method : 'POST',
		url : 'http://' + xbmc_address + '/jsonrpc',
		headers : {
			"Content-type" : "application/json"
		},
		data : '{"jsonrpc": "2.0", "method": "Playlist.Clear", '
				+ '"params":{"playlistid" : ' + xbmc_video_playlist
				+ '}, "id" : 1}',
		onload : function(response) {
			/* Add movies to Video playlist */
			xbmc_queued = "";
			context['encoded'] = encode_url_for_new_playlist(context);
			if (context['is_playlist']) {
				open_video_player(context);
			} else {
				context['position'] = 0;
				queue_movie_at(context);
				open_video_playlist(context)
			}
		},
		onerror : xbmc_json_error,
		ontimeout : xbmc_json_timeout,
		timeout : 6000
	});
}

function queue_movie_at(context) {
	if (xbmc_queued == context['url']) {
		// Show somehow that this action was already completed
		console.log("Already queued " + xbmc_queued);
		show_ui_msg("QUEUEED", 1000);
		return;
	}
	GM_xmlhttpRequest({
		method : 'POST',
		url : 'http://' + xbmc_address + '/jsonrpc',
		headers : {
			"Content-type" : "application/json"
		},
		data : '{"jsonrpc": "2.0", "method": "Playlist.Insert", '
				+ '"params":{"item": { "file" : "' + context['encoded']
				+ '" }, "playlistid" :' + context['playlistid']
				+ ', "position" : ' + context['position'] + ' }, "id" : 1}',
		onerror : xbmc_json_error,
		ontimeout : xbmc_json_timeout,
		timeout : 6000,
		onload : function(response) {
			xbmc_queued = context['url'];
			execute_anyurl_command(context, 'resolve_single_plugin', function(
					response) {
				show_ui_msg("QUEUEED", 4000);
			})
		}
	})
}

function queue_in_party_mode(context, pos) {
	GM_xmlhttpRequest({
		method : 'POST',
		url : 'http://' + xbmc_address + '/jsonrpc',
		headers : {
			"Content-type" : "application/json"
		},
		data : '{"jsonrpc": "2.0", "id" : 1, "method": "Playlist.GetItems",'
				+ '"params":{"playlistid" : ' + context['playlistid'] + '}}',
		ontimeout : xbmc_json_timeout,
		timeout : 10000,
		onload : function(response) {
			var xbmc_response = JSON.parse(response.responseText);
			if (xbmc_response.result.limits == undefined) {
				console.log("Error: Playlist.GetItems bad response");
				return;
			}
			// Queue exist, enqueue media at the end of user
			// selection
			if (pos < 0) {
				context['position'] = xbmc_response.result.limits.end - pos + 1;
			} else if (pos > xbmc_response.result.limits.end) {
				context['position'] = xbmc_response.result.limits.end;
			}
			console.log("Queue in playlist " + context['playlistid'] + "at "
					+ context['position']);
			GM_setValue('QUEUE_POSITION', context['position'] + 1);
			queue_movie_at(context);
		}
	});
}

/* */
function config_script() {
	GM_config.open();
}

/* Send link to Kodi */
function queue_movie() {
	var context = {};
	context['url'] = document.documentURI;
	context['title'] = encodeURIComponent(get_meta_contents("title",
			document.title));
	context['description'] = encodeURIComponent(get_meta_contents(
			"description", context['description']));
	context['encoded'] = encode_url_for_queueing(context);
	context['is_playlist'] = url_is_playlist(context['url']);
	context['playlistid'] = xbmc_video_playlist;
	context['position'] = GM_getValue('QUEUE_POSITION', 0);
	console.log('Trying queue movie/create new playlist ' + context['title']);
	var xbmc_queue_depth = undefined;

	show_ui_msg("LOADING", 30000);

	// Get the current playlist
	GM_xmlhttpRequest({
		method : 'POST',
		url : 'http://' + xbmc_address + '/jsonrpc',
		headers : {
			"Content-type" : "application/json"
		},
		data : '{"jsonrpc": "2.0", "method": "Player.GetActivePlayers",'
				+ '"params":{}, "id" : 1}',
		onerror : xbmc_json_error,
		ontimeout : xbmc_json_timeout,
		timeout : 6000,
		onload : function(response) {
			var xbmc_active = JSON.parse(response.responseText);
			if (xbmc_active.result == undefined
					|| xbmc_active.result.length == 0) {
				console.log("No active players, create a new queue");
				play_in_new_playlist(context);
				return;
			}
			GM_xmlhttpRequest({
				method : 'POST',
				url : 'http://' + xbmc_address + '/jsonrpc',
				headers : {
					"Content-type" : "application/json"
				},
				data : '{"jsonrpc": "2.0", "method": "Player.GetProperties",'
						+ '"params":{"playerid" : '
						+ xbmc_active.result[0].playerid
						+ ', "properties" :  [ "playlistid" , "partymode", "position" ] }, "id" : 1}',
				onload : function(response) {
					var xbmc_properties = JSON.parse(response.responseText);
					context['playlistid'] = xbmc_properties.result.playlistid;
					if (xbmc_properties.result.partymode == true) {
						queue_in_party_mode(context, xbmc_partylist_size);
					} else {
						if (context['position'] <= xbmc_properties.result.position) {
							context['position'] = xbmc_properties.result.position + 1;
						}
						queue_in_party_mode(context, context['position']);
					}
				},
				onerror : function(response) {
					/* No active playlist */
					console.log("Not playing playlist, queue and play")
					play_in_new_playlist(context);
					xbmc_json_error();
				},
				ontimeout : xbmc_json_timeout,
				timeout : 6000,
			});
		}
	});
}

/*
 * ============================================================================
 * Movie control functions
 * ============================================================================
 */
function pause_movie() {
	GM_xmlhttpRequest({
		method : 'POST',
		url : 'http://' + xbmc_address + '/jsonrpc',
		headers : {
			'Content-Type' : 'application/json'
		},
		data : '{"jsonrpc":"2.0", "method":"Player.PlayPause", "params":{"playerid":1}, "id" : 1}'
	});
	GM_xmlhttpRequest({
		method : 'POST',
		url : 'http://' + xbmc_address + '/jsonrpc',
		headers : {
			'Content-Type' : 'application/json'
		},
		data : '{"jsonrpc":"2.0", "method":"Player.PlayPause", "params":{"playerid":0}, "id" : 1}'
	});
}

function stop_movie() {
	GM_xmlhttpRequest({
		method : 'POST',
		url : 'http://' + xbmc_address + '/jsonrpc',
		headers : {	'Content-Type' : 'application/json'	},
		data : '{"jsonrpc":"2.0", "method": "Player.Stop", "params":{"playerid":1}, "id" : 1}'
	});
	GM_xmlhttpRequest({
		method : 'POST',
		url : 'http://' + xbmc_address + '/jsonrpc',
		headers : {	'Content-Type' : 'application/json' },
		data : '{"jsonrpc":"2.0", "method": "Player.Stop", "params":{"playerid":0}, "id" : 1}'
	});
	xbmc_queued = "";
}

function next_movie() {
	GM_xmlhttpRequest({
		method : 'POST',
		url : 'http://' + xbmc_address + '/jsonrpc',
		headers : {	'Content-Type' : 'application/json' },
		data : '{"jsonrpc": "2.0", "method": "Player.GoTo", "params":{"playerid" : 1, "to" : "next" }, "id" : 1}'
	});
	GM_xmlhttpRequest({
		method : 'POST',
		url : 'http://' + xbmc_address + '/jsonrpc',
		headers : { 'Content-Type' : 'application/json'	},
		data : '{"jsonrpc": "2.0", "method": "Player.GoTo", "params":{"playerid" : 0, "to" : "next" }, "id" : 1}'
	});
	xbmc_queued = "";
}

/*
 * ============================================================================
 * UI functions
 * ============================================================================
 */
function remove_ui_msg() {
	try {
		xbmc_ui.removeChild(xbmc_title);
	} catch (e) {
		// catch and just suppress error
	}
	try {
		clearTimeout(xbmc_msg_timer);
	} catch (e) {
		// catch and just suppress error
	}
}

function show_ui_msg(msg, timeout) {
	remove_ui_msg();
	xbmc_title.innerHTML = msg;
	xbmc_ui.insertBefore(xbmc_title, xbmc_play_control);
	xbmc_msg_timer = setTimeout(remove_ui_msg, timeout);
}

function add_play_on_xbmc_buttons() {
	console.log('Found clip ' + document.documentURI);
	xbmc_ui = document.createElement('div');
	xbmc_ui.setAttribute('id', 'xbmc');

	xbmc_ui_use_big = GM_config.get('USE_BIG');
	xbmc_buttons = {};
	if (xbmc_ui_use_big) {
		xbmc_buttons['share'] = Share_60_png;
		xbmc_buttons['share_h'] = Share_60H_png;
		xbmc_buttons['next'] = Next_30_png;
		xbmc_buttons['next_h'] = Next_30H_png;
		xbmc_buttons['playpause'] = PlayPause_30_png;
		xbmc_buttons['playpause_h'] = PlayPause_30H_png;
		xbmc_buttons['stop'] = Stop_30_png;
		xbmc_buttons['stop_h'] = Stop_30H_png;
		xbmc_buttons['more'] = More_30_png;
		xbmc_buttons['more_h'] = More_30H_png;
		xbmc_buttons['bwidth'] = '60px';
		xbmc_buttons['swidth'] = '30px';
		xbmc_buttons['fwidth'] = '130px';
	} else {
		xbmc_buttons['share'] = Share_40_png;
		xbmc_buttons['share_h'] = Share_40H_png;
		xbmc_buttons['next'] = Next_20_png
		xbmc_buttons['next_h'] = Next_20H_png;
		xbmc_buttons['playpause'] = PlayPause_20_png;
		xbmc_buttons['playpause_h'] = PlayPause_20H_png;
		xbmc_buttons['stop'] = Stop_20_png;
		xbmc_buttons['stop_h'] = Stop_20H_png;
		xbmc_buttons['more'] = More_20_png
		xbmc_buttons['more_h'] = More_20H_png;
		xbmc_buttons['bwidth'] = '40px';
		xbmc_buttons['swidth'] = '20px';
		xbmc_buttons['fwidth'] = '90px';
	}

	xbmc_play_control = document.createElement('div');
	xbmc_play_control.setAttribute('id', 'playControl');

	var xbmc_other_control = document.createElement('div');
	xbmc_other_control.setAttribute('id', 'otherControl');

	var xbmc_playback_control = document.createElement('div');
	xbmc_playback_control.setAttribute('id', 'playbackControl');

	xbmc_title = document.createElement('div');
	xbmc_title.setAttribute('id', 'xbmcText');
	xbmc_title.innerHTML = 'PLAYING';

	var xbmc_play = document.createElement('span');
	xbmc_play.addEventListener('click', queue_movie, false);
	xbmc_play.setAttribute('id', 'btPlay');
	xbmc_play.setAttribute('title', 'Send to Kodi');

	var xbmc_pause = document.createElement('span');
	xbmc_pause.addEventListener('click', pause_movie, false);
	xbmc_pause.setAttribute('id', 'btPause');
	xbmc_pause.setAttribute('title', 'Pause/Resume playback');

	var xbmc_stop = document.createElement('span');
	xbmc_stop.addEventListener('click', stop_movie, false);
	xbmc_stop.setAttribute('id', 'btStop');
	xbmc_stop.setAttribute('title', 'Stop video');

	xbmc_play_control.appendChild(xbmc_play);
	var xbmc_next = document.createElement('span');
	xbmc_next.addEventListener('click', next_movie, false);
	xbmc_next.setAttribute('id', 'btNext');
	xbmc_next.setAttribute('title', 'Play next video');

	var xbmc_more = document.createElement('span');
	xbmc_more.addEventListener('click', config_script, false);
	xbmc_more.setAttribute('id', 'btMore');
	xbmc_more.setAttribute('title', 'More options (Config)');

	xbmc_play_control.appendChild(xbmc_play);
	xbmc_playback_control.appendChild(xbmc_next);
	xbmc_playback_control.appendChild(xbmc_more);
	xbmc_playback_control.appendChild(xbmc_pause);
	xbmc_playback_control.appendChild(xbmc_stop);

	xbmc_other_control.appendChild(xbmc_playback_control);
	xbmc_ui.appendChild(xbmc_play_control);
	xbmc_ui.appendChild(xbmc_other_control);

	document.body.parentNode.insertBefore(xbmc_ui, document.body);

	GM_addStyle('#xbmc { opacity:0.4; width:' + xbmc_buttons['fwidth']
			+ '; position:fixed; z-index:100; bottom:0; right:0;'
			+ ' display:block; background:#103040;'
			+ ' -moz-border-radius-topleft: ' + xbmc_buttons['swidth']
			+ '; -moz-border-radius-bottomleft:' + xbmc_buttons['swidth']
			+ '; -webkit-border-top-left-radius:' + xbmc_buttons['swidth']
			+ ';  -webkit-border-bottom-left-radius:' + xbmc_buttons['swidth']
			+ '; } ')
	GM_addStyle('#xbmc:hover { opacity: 0.7; } ')

	GM_addStyle('#xbmcText { opacity:0.8; font-family:Terminal; '
			+ 'text-align:center; font-size:12px; font-weight:bold; '
			+ 'background:#401010; color:#a0a0a0 } ')

	// 'Share' control
	GM_addStyle('#playControl span, #playbackPlay span:hover { width:'
			+ xbmc_buttons['bwidth']
			+ '; height:'
			+ xbmc_buttons['bwidth']
			+ '; float:left; display:block; padding-bottom:0px; -moz-background-size:'
			+ xbmc_buttons['bwidth'] + '; background-size:'
			+ xbmc_buttons['bwidth'] + '; -webkit-background-size:'
			+ xbmc_buttons['bwidth'] + '; -o-background-size:'
			+ xbmc_buttons['bwidth'] + '; -khtml-background-size:'
			+ xbmc_buttons['bwidth'] + '; cursor:pointer; } ')

	GM_addStyle('#btPlay { background: url("data:image/png;base64,'
			+ xbmc_buttons['share'] + '") no-repeat; } ')
	GM_addStyle('#btPlay:hover { background: url("data:image/png;base64,'
			+ xbmc_buttons['share_h'] + '") no-repeat; } ')

	// Other control
	GM_addStyle('#playbackControl span, #playbackControl span:hover { width:'
			+ xbmc_buttons['swidth'] + '; height:' + xbmc_buttons['swidth']
			+ '; bottom:0; float:left; display:block; margin-left:3px; '
			+ '-moz-background-size:' + xbmc_buttons['swidth']
			+ '; background-size:' + xbmc_buttons['swidth']
			+ '; -webkit-background-size:' + xbmc_buttons['swidth']
			+ '; -o-background-size:' + xbmc_buttons['swidth']
			+ '; -khtml-background-size:' + xbmc_buttons['swidth']
			+ '; cursor:pointer; } ')

	GM_addStyle('#btNext { background: url("data:image/png;base64,'
			+ xbmc_buttons['next'] + '") no-repeat; } ')
	GM_addStyle('#btNext:hover { background: url("data:image/png;base64,'
			+ xbmc_buttons['next_h'] + '") no-repeat; } ')

	GM_addStyle('#btMore { background: url("data:image/png;base64,'
			+ xbmc_buttons['more'] + '") no-repeat; } ')
	GM_addStyle('#btMore:hover { background: url("data:image/png;base64,'
			+ xbmc_buttons['more_h'] + '") no-repeat; } ')

	GM_addStyle('#btPause { background: url("data:image/png;base64,'
			+ xbmc_buttons['playpause'] + '") no-repeat; } ')
	GM_addStyle('#btPause:hover { background: url("data:image/png;base64,'
			+ xbmc_buttons['playpause_h'] + '") no-repeat; } ')

	GM_addStyle('#btStop { background: url("data:image/png;base64,'
			+ xbmc_buttons['stop'] + '") no-repeat; } ')
	GM_addStyle('#btStop:hover { background: url("data:image/png;base64,'
			+ xbmc_buttons['stop_h'] + '") no-repeat; } ')
}

/*
 * ============================================================================
 * Site dependent code here!!!!
 * ============================================================================
 */
var supported_hosts = [ '180upload.com', 'allmyvideos.net', 'auengine.com',
		'bayfiles.com', 'bestreams.net', 'billionuploads.com', 'castamp.com',
		'cloudy.ch', 'cloudy.com', 'cloudy.ec', 'cloudy.eu', 'cloudy.sx',
		'cloudyvideos.com', 'crunchyroll.com', 'cyberlocker.ch', 'daclips.com',
		'daclips.in', 'dailymotion.com', 'divxden.com', 'divxstage.eu',
		'divxstage.net', 'divxstage.to', 'donevideo.com', 'ecostream.tv',
		'filedrive.com', 'filenuke.com', 'firedrive.com', 'flashx.tv',
		'gorillavid.com', 'gorillavid.in', 'hostingbulk.com', 'hugefiles.net',
		'jumbofiles.com', 'letwatch.us', 'limevideo.net', 'mega-vids.com',
		'mightyupload.com', 'mooshare.biz', 'movdivx.com', 'movieshd.co',
		'movpod.in', 'movpod.net', 'movreel.com', 'movshare.net', 'movzap.com',
		'mp4star.com', 'mp4stream.com', 'mp4upload.com', 'mrfile.me',
		'muchshare.net', 'nosvideo.com', 'novamov.com', 'nowvideo.ch',
		'nowvideo.eu', 'nowvideo.sx', 'play44.net', 'played.to',
		'playwire.com', 'primeshare.tv', 'promptfile.com', 'purevid.com',
		'putlocker.com', 'rapidvideo.com', 'realvid.net', 'royalvids.eu',
		'shared.sx', 'sharerepo.com', 'sharesix.com', 'sharevid.org',
		'sockshare.com', 'speedvideo.net', 'stagevu.com', 'streamin.to',
		'ted.com', 'thefile.me', 'thevideo.me', 'trollvid.net', 'tubeplus.me',
		'tune.pk', 'uploadc.com', 'uploadcrazy.net', 'veehd.com', 'veoh.com',
		'vidbull.com', 'vidbux.com', 'vidcrazy.net', 'video44.net',
		'videobb.com', 'videoboxone.com', 'videofun.me', 'videohut.to',
		'videomega.tv', 'videoraj.ch', 'videoraj.com', 'videoraj.ec',
		'videoraj.eu', 'videoraj.sx', 'videotanker.co', 'videovalley.net',
		'videoweed.es', 'videozed.net', 'vidplay.net', 'vidspot.net',
		'vidstream.in', 'vidto.me', 'vidup.org', 'vidxden.com', 'vidzi.tv',
		'vidzur.com', 'vimeo.com', 'vk.com', 'vodlocker.com',
		'watchfreeinhd.com', 'xvidstage.com', 'yourupload.com', 'youtu.be',
		'youtube.com', 'youwatch.org', 'zalaa.com', 'zuzvideo.com', ];

function binarySearch(items, value) {

	var startIndex = 0, stopIndex = items.length - 1, middle = Math
			.floor((stopIndex + startIndex) / 2);

	while (items[middle] != value && startIndex < stopIndex) {
		// adjust search area
		if (value < items[middle]) {
			stopIndex = middle - 1;
		} else if (value > items[middle]) {
			startIndex = middle + 1;
		}

		// recalculate middle
		middle = Math.floor((stopIndex + startIndex) / 2);
	}

	// make sure it's the right value
	return (items[middle] != value) ? -1 : middle;
}

/*
 * Read metadata
 */
function get_meta_contents(mn, dv) {
	var m = document.getElementsByTagName('meta');
	for ( var i in m) {
		if (m[i].name == mn) {
			return m[i].content;
		}
	}
	return dv;
}
/*
 * Youtube has more features than most streaming sites,it needs special
 * treatment
 */
function parse_yt_params(video_url) {
	var regex = /[?&]([^=#]+)=([^&#]*)/g;
	var params = {}, match;
	while (match = regex.exec(video_url)) {
		params[match[1]] = match[2];
	}
	return params;
}

function url_is_playlist(video_url) {
	switch (current_host) {
	case "youtube.com":
	case "youtu.be":
		var yt_params = parse_yt_params(video_url);
		if (yt_params["list"]) {
			return is_playlist
		}
		break;
	case "ted.com": /* TED plugin doesn't support playlists yet */
		break;
	}
	return !is_playlist;
}

/*
 * URI to send to AnyURL script in Kodi.
 */
function encode_url_for_queueing(context) {
	switch (current_host) {
	case "youtube.com":
	case "youtu.be":
		/*
		 * Better talk to YouTube plugin directly, it allows for more flexible
		 * use
		 */
		var yt_params = parse_yt_params(context['url']);
		return 'plugin://plugin.video.youtube/play/?video_id=' + yt_params["v"];
		break;
	case "ted.com":
		return 'plugin://plugin.video.ted.talks/?mode=playVideo&url='
				+ encodeURIComponent(context['url']) + '&icon=a';
		break;
	}
	/* URL needs extra processing on Kodi's side */
	anyurl_command = 'plugin://script.anyurl.player/?mode=play_video&url='
			+ encodeURIComponent(context['url']);
	if (context['title'] != undefined) {
		anyurl_command += '&title=' + context['title'];
	}
	if (context['description'] != undefined) {
		anyurl_command += '&description=' + context['description'];
	}
	return anyurl_command
}

/*
 * URI to send to a new playist.
 */
function encode_url_for_new_playlist(context) {
	switch (current_host) {
	case "youtube.com":
	case "youtu.be":
		/*
		 * Better talk to YouTube plugin directly, it allows for more flexible
		 * use
		 */
		var yt_params = parse_yt_params(context['url']);
		if (yt_params["list"]) {
			result = 'plugin://plugin.video.youtube/play/?play=1&order=default&playlist_id='
					+ yt_params["list"];
			if (yt_params["v"]) {
				result = result + '&video_id=' + yt_params["v"];
			}
			return result;
		}
		break;
	}
	return encode_url_for_queueing(context)
}

/* Add buttons only if necessary */
if (binarySearch(supported_hosts, current_host) >= 0 && top == self) {
	// First run?
	if (xbmc_address == '<host>:<port>')
		config_script();

	add_play_on_xbmc_buttons()
} else {
	console.log("Unsupported host " + document.documentURI)
}
